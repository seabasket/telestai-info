<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>telestai.info</title>
<style>
  /*
    Colors:
      cream  #f5e6c8  -- text, borders
      brown  #230e02  -- page background
      black  #000000  -- terminal background
      green  #6ab95c  -- prompt
  */

  html {
    background: #230e02;
  }

  body {
    margin: 0;
    height: 100vh;
    background: #230e02;
    color: #f5e6c8;
    font-family: 'Lucida Console', monospace;
    font-size: clamp(0.45rem, 1vh, 0.85rem);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    letter-spacing: 0.3px;
    overflow: hidden;
    touch-action: none;
    position: fixed;
    width: 100vw;
  }
  pre { margin-top: 20px; color: #f5e6c8; font-size: 0.8rem; }
  .terminal-row {
    display: flex;
    align-items: center;
    gap: 8px;
    width: min(88vw, 420px);
  }
  @media (min-width: 700px) {
    .terminal-row { width: min(90vw, 800px); }
  }
  .terminal-window {
    display: flex;
    align-items: center;
    background: #000000;
    border: 1px solid #f5e6c8;
    border-radius: 6px;
    padding: 9px 14px;
    flex: 1;
    box-shadow: 0 0 24px rgba(0,0,0,0.6);
    min-width: 0;
  }
  .prompt {
    color: #6ab95c;
    white-space: nowrap;
    user-select: none;
    pointer-events: none;
    flex-shrink: 0;
    font-size: clamp(0.6rem, 2.2vw, 0.85rem);
  }
  .terminal-input {
    -webkit-appearance: none;
    appearance: none;
    color-scheme: dark;
    background: transparent;
    border: none;
    outline: none;
    color: #f5e6c8 !important;
    -webkit-text-fill-color: #f5e6c8 !important;
    -webkit-box-shadow: 0 0 0 1000px #000000 inset !important;
    box-shadow: 0 0 0 1000px #000000 inset !important;
    font-family: 'Lucida Console', monospace;
    font-size: clamp(0.6rem, 2.2vw, 0.85rem);
    flex: 1;
    caret-color: #f5e6c8;
    min-width: 0;
    padding: 0;
    margin: 0;
    opacity: 1;
    border-radius: 0;
  }
  .terminal-input:focus {
    -webkit-box-shadow: 0 0 0 1000px #000000 inset !important;
    box-shadow: 0 0 0 1000px #000000 inset !important;
    -webkit-text-fill-color: #f5e6c8 !important;
  }
  .submit-btn {
    -webkit-appearance: none;
    appearance: none;
    color-scheme: dark;
    font-family: 'Lucida Console', monospace;
    font-size: clamp(0.6rem, 2.2vw, 0.85rem);
    background-color: #000000 !important;
    color: #f5e6c8 !important;
    -webkit-text-fill-color: #f5e6c8 !important;
    border: 1px solid #f5e6c8;
    border-radius: 6px;
    padding: 7px 10px;
    cursor: pointer;
    letter-spacing: 0.3px;
    white-space: nowrap;
    flex-shrink: 0;
  }
  .submit-btn:hover, .submit-btn:active {
    opacity: 0.7;
  }
  .box {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 10px;
  }
  .fade-out {
    opacity: 0;
    transition: opacity 0.3s ease-out;
  }
  .typewriter-container {
    margin-bottom: 20px;
    min-height: 1.2em;
    color: #f5e6c8;
    font-size: clamp(0.6rem, 2.2vw, 0.85rem);
    width: min(88vw, 420px);
    text-align: left;
    word-wrap: break-word;
    overflow-wrap: break-word;
    word-break: break-word;
  }
  @media (min-width: 700px) {
    .typewriter-container { width: min(90vw, 800px); }
  }
  #access-typewriter {
    display: none;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -200%);
    z-index: 10000;
    font-family: 'Lucida Console', monospace;
    color: #f5e6c8;
    font-size: clamp(0.6rem, 2.2vw, 0.85rem);
    letter-spacing: 0.3px;
    text-align: left;
    width: min(88vw, 420px);
    word-wrap: break-word;
    overflow-wrap: break-word;
    word-break: break-word;
  }
  @media (min-width: 700px) {
    #access-typewriter { width: min(90vw, 800px); }
  }
  .typewriter-text {
    display: inline;
    border-right: 2px solid #f5e6c8;
    padding-right: 2px;
    word-wrap: break-word;
    overflow-wrap: break-word;
    word-break: break-word;
  }
  #history {
    width: min(88vw, 420px);
    text-align: left;
    font-family: 'Lucida Console', monospace;
    font-size: clamp(0.6rem, 2.2vw, 0.85rem);
    color: #f5e6c8;
    margin-top: 10px;
  }
  @media (min-width: 700px) {
    #history { width: min(90vw, 800px); }
  }
  #history pre {
    margin: 0;
    font-size: clamp(0.6rem, 2.2vw, 0.85rem);
  }
</style>
</head>
<body>

<div class="box">

<div class="typewriter-container">
  <span class="typewriter-text" id="typewriter"></span>
</div>

<div class="terminal-row">
  <form class="terminal-window" onsubmit="check(); return false;">
    <span class="prompt" id="prompt">visitor@... ~ %&nbsp;</span>
    <input type="text" class="terminal-input" id="code" maxlength="11" autofocus autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false">
  </form>
  <button class="submit-btn" onclick="check()">enter</button>
</div>

<div id="msg"></div>
<div id="history"></div>
</div>

<div id="access-typewriter"></div>

<div id="access-granted" style="display:none; position:fixed; top:50%; left:50%; transform:translate(-50%,-50%); font-family:'Lucida Console',monospace; color:#f5e6c8; font-size:clamp(0.7rem,2.5vw,1rem); white-space:nowrap; letter-spacing:0.3px; transition:opacity 0.4s ease-out;">&gt; <span style="color:#6ab95c;">ACCESS GRANTED</span> --&gt; redirecting...</div>

<script>
const CODE_PATTERN = /^[a-z]{2}-[a-z0-9]{3,8}$/;

function getDeviceName() {
  const ua = navigator.userAgent.toLowerCase();
  if (/iphone/.test(ua)) return 'iphone';
  if (/ipad/.test(ua)) return 'ipad';
  if (/android/.test(ua)) return 'android';
  if (/macintosh|mac os x/.test(ua)) return 'mac';
  if (/windows/.test(ua)) return 'windows';
  if (/linux/.test(ua)) return 'linux';
  return null;
}

function getBrowserName() {
  const ua = navigator.userAgent.toLowerCase();
  if (/edg\//.test(ua)) return 'edge';
  if (/opr\/|opera/.test(ua)) return 'opera';
  if (/firefox/.test(ua)) return 'firefox';
  if (/chrome/.test(ua)) return 'chrome';
  if (/safari/.test(ua)) return 'safari';
  return null;
}

async function getPublicIP() {
  try {
    const res = await fetch('https://api.ipify.org?format=json');
    const data = await res.json();
    return data.ip;
  } catch {
    return 'unknown';
  }
}

(async () => {
  const device = getDeviceName();
  const browser = getBrowserName();
  const label = device && browser ? `${device}-${browser}`
              : device || browser || 'visitor';
  const ip = await getPublicIP();
  document.getElementById('prompt').textContent = `${label}@${ip} ~ % \u00a0`;
})();

// SHA-256 hashes of known page codes. To add a new page:
//   echo -n "your-code" | shasum -a 256
const KNOWN_HASHES = new Set([
  "42e47f2fe6b7d410f0a5991928f14ca370d22656ce1a6990dbb23f3f86001e98", // ts-0001
  "7e9d4370f98d07993360bd4758d90695bb55643f814b714c1075cdec92d6bf10", // ts-snri314
  "a4262e1c9bcbc1721eb3fe13558154460a2b2a2d307daa32532478526ce6ccb1"  // about
]);

async function hashInput(str) {
  const buf = await crypto.subtle.digest("SHA-256", new TextEncoder().encode(str));
  return Array.from(new Uint8Array(buf)).map(b => b.toString(16).padStart(2, "0")).join("");
}

function getCookie(name) {
  const match = document.cookie.match(new RegExp('(^| )' + name + '=([^;]+)'));
  return match ? JSON.parse(decodeURIComponent(match[2])) : [];
}

function setCookie(name, value, days = 365) {
  const d = new Date();
  d.setTime(d.getTime() + (days*24*60*60*1000));
  document.cookie = name + "=" + encodeURIComponent(JSON.stringify(value)) + ";expires=" + d.toUTCString() + ";path=/";
}

let correctHistory = getCookie("correctHistory") || [];

if (correctHistory.length) {
  document.getElementById("history").innerHTML = "<pre>used access codes:\n" + correctHistory.join("\n") + "</pre>";
}

// Auto-lowercase on input
const codeInput = document.getElementById("code");
codeInput.addEventListener('input', () => {
  const pos = codeInput.selectionStart;
  codeInput.value = codeInput.value.toLowerCase();
  codeInput.setSelectionRange(pos, pos);
});


async function check() {
  const input = document.getElementById("code").value.toLowerCase().trim();
  const msg = document.getElementById("msg");
  const hash = await hashInput(input);

  if (!KNOWN_HASHES.has(hash)) {
    if (CODE_PATTERN.test(input)) {
      msg.innerHTML = "<pre style='color:#ff5555'>theres no page for that code :((</pre>";
    } else {
      msg.innerHTML = "<pre style='color:#ff5555'>theres no page for that code :((\ncodes usually look like \"xx-something\"</pre>";
    }
    return;
  }

  if (!correctHistory.includes(input)) {
    correctHistory.push(input);
    setCookie("correctHistory", correctHistory);
  }

  // Show access granted typewriter message
  showAccessGrantedMessage();

  // Fade out the input UI
  document.querySelector('.box').classList.add('fade-out');

  // Show access granted message
  const granted = document.getElementById('access-granted');
  setTimeout(() => {
    granted.style.display = 'block';
  }, 320);

  // Fade message and background to black
  setTimeout(() => {
    document.body.style.transition = 'background-color 0.4s ease-out';
    document.body.style.backgroundColor = '#000000';
    granted.style.opacity = '0';

    // Fade out access typewriter
    const accessTypewriter = document.getElementById('access-typewriter');
    accessTypewriter.style.transition = 'opacity 0.4s ease-out';
    accessTypewriter.style.opacity = '0';
  }, 1300);

  // Redirect
  setTimeout(() => {
    location.href = input + ".html";
  }, 2000);
}

// Access granted messages
const accessGrantedMessages = [
  "wheeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",
  "byeee where u goingggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggg",
  "ooooh where we goinggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggg",
  "seeyaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"
];

// Welcome back messages (shown when returning from another telestai.info page)
const welcomeBackMessages = [
  "oh hey you're back!",
  "how was it?",
  "cool cool",
  "ok back to what i was saying..."
];

// Typewriter effect
const phrases = [
  "hello!!!!",
  "have an access code?",
  "you can put it here ↓↓↓",
  "just type in the terminal and hit enter!",
  "nice ip address btw very cool",
  "r u using nord vpn lmao",
  "nvm im not that smart",
  "just go ahead and put that access code here↓↓↓",
  "super ez just ↓↓↓ and bam",
  "did you know my favorite command is 'about'?",
  "are you waiting for something?",
  "ummmm",
  "wanna hear a joke?",
  "i cant hear you so im gonna say one anyway",
  "why did the computer always get cold?",
  "...",
  "because it always had its WINDOWS open!",
  "*fozzy voice* wocka wockaaaaa",
  "https://www.youtube.com/watch?v=8eXj97stbG8",
  "... I use Arch btw (i do not use Arch)",
  "ok this is getting old im gonna loop around now. bye!",
  "hello!!!!",
  "have an access code?",
  "you can put it her-SIIIIIIIIKE",
  "JK IM STIL HERE",
  "JAJAHAHAH",
  "ooh i accidentally typed a J...    dalé",
  "i feel like im the Jupiter Icy Moons Explorer",
  "tha JUICE",
  "I wonder what football will look like in the future?",
  "no fr, after you type this code for the invite or whteva",
  "look up 'what will football look like in the future?'",
  "totally killer",
  "i wonder if we become immortal and stop aging on 4/7/26?",
  "Andrew Nelson",
  "btw you should know im not Andrew Nelson",
  "or srowe or telestai",
  "im an unnamed homepage character was born on index.html line 277",
  "unnamed.......",
  "i guess i coulddddd use my variable name as a name",
  "in that case....",
  "im phrases... ",
  "....const phrases",
  "james bond says his name 1.5 times when he introduces himself btw",
  "BREAKING: Men's House has morning prayer tomorrow.",
  "having to d3let myself after every line is mad annoying",
  "just so u kno",
  "hello!!!!       -what-",
  "have an access -WHAT- code? ",
  "you -YOURE -can -INTERRUPTING- 'put it -ME- here ↓↓↓",
  "Well i guess that part IS on a loop ROFL",
  "can you hear me?",
  "if you said yes stop lying no u cant",
  "im literally just plaintext idiot",
  "...sorry that was mean",
  "what happens if i just start typing some bs liek really long",
  "i bet that would SUUUUUUUUCK on a mobile browser",
  "here goes",
  "'YouguyswannaplayUNOrealquickandIcanrecorditandmakethatmyuploadtonight?''IdonthaveUNO.''EveryonehasUNOdips***itcamefreewithyourf******Xbox.''IdidntgetitIhavetheoldestXboxknoowntoman''NoyouDONTIgotmineondayoneyouf***''Wellminedidnthaveit-''YouhaveUNOOOOOOOOOO''Idonthaveityouf******-''YOUHAVEUNOOOOOOOOONarrator: According to all known laws of aviation, there is no way that a bee should be able to fly. Its wings are too small to get its fat little body off the ground. The bee, of course, flies anyway because bees don't care what humans think is impossible. (Cut to Barry's room, where he's picking out what to wear.) Barry: Yellow, black. Yellow, black. Yellow, black. Yellow, black. Ooh, black and yellow! Yeah, let's shake it up a little. (Barry uses honey from a dispenser to style his hair, rinse his mouth, and then applies it to his armpits.) Mom (Janet Benson): (calling from downstairs:) Barry! Breakfast is ready! Barry: Coming! (phone rings) Oh, hang on a second. (adjusts his antennas into a headset) Hello? Adam Flayman: (on the phone) Barry? Barry: Adam? Adam: Can you believe this is happening? Barry: I can't believe it. I'll pick you up. (hangs up, sharpens his stinger) Lookin' sharp. (flies downstairs) Mom: Barry, why don't you use the stairs? Your father paid good money for those. Barry: Sorry. I'm excited. Dad (Martin Benson): Here's the graduate. We're very proud of you, son. And a perfect report card, all B's. Mom: Very proud. (touches Barry's hair) Barry: Ma! I got a thing going here. Mom: Ah, you got some lint on your fuzz. Barry: Ow! That's me! Dad: Wave to us! We'll be in row 118,000. Barry: Bye! (flies off) Mom: Barry, I told you, stop flying in the house! (Barry drives his car to pick up his classmate. Adam's outside his house, reading the Hive Today newspaper. The front page headline reads 'FRISBEE HITS HIVE ! Internet Down. Bee: 'I heard sound, then Wham-o!'') Barry: Hey, Adam. Adam: Hey, Barry. Is that fuzz gel? Barry: A little. It's a special day, finally graduating. Adam: Never thought I'd make it. Barry: Yeah, three days of grade school, three days of high school. Adam: Those were so awkward. Barry: Three days of college. I'm glad I took off one day in the middle and just hitchhiked around the hive. Adam: You did come back different. (a bee calls out as they drive past) Bee: Hi, Barry. Barry: Hey Artie, growing a mustache? Looks good. Adam: Hey, did you hear about Frankie? Barry: Yeah. Adam: You goin' to his funeral? Barry: No, I'm not goin' to his funeral. Everybody knows you sting someone, you die. You don't waste it on a squirrel. He was such a hothead. Adam: Yeah, I guess he could have just gotten out of the way. (They make various noises as the car goes up and down some hills and does a loop on the road.) A & B: Woah! Oooooooh! Adam: I love this incorporating an amusement park right into our regular day. Barry: I guess that's why they say we don't need vacations. (They arrive, fly in and take their seats.) Barry: Boy, quite a bit of pomp... under the circumstances. Barry: Well, Adam, today we are men. Adam: We are! Barry: Bee-men. Adam: Amen! A & B: Hallelujah! (bumping each other) Aaaaaaaaaaaah! Announcer: Students, faculty, distinguished bees, please welcome Dean Buzzwell. (Dean Buzzwell walks onto the stage and taps the microphone.) Buzzwell: Welcome, New Hive City graduating class of... (presses a button to change the timer on the podium from 9:00 to 9:15) ...9:15. And that concludes our graduation ceremonies. (Students cheer, throw their caps into the air as helmets are placed on their heads.) Buzzwell: And begins your career at Honex Industries! Barry: Are we gonna pick our jobs today? Adam: I heard it's just orientation. Barry: Huh. Woah. Heads up! Here we go. (The stands for Winger University the students are sitting in begin converting into tram seating.) Female announcer: Keep your hands and antennas inside the tram at all times. (flies down to go in the tram as it starts moving and repeats it in Spanish:) Mantenga sus manos y antenas dentro del tranvía en todo momento. Barry: Wonder what it's going to be like? Adam: A little scary. (he and Barry mimic shivering and making scared noises) Trudy, the Honex tour guide: Welcome to Honex, a division of Honesco and a part of the Hexagon Group. Barry: This is it! everyone: Wow. (tram moves into the factory floor) Barry: Wow. Trudy: We know that you, as a bee, have worked your whole life to get to the point where you can work for your whole life. Honey begins when our valiant Pollen Jocks bring the nectar to the hive. Our top-secret formula is automatically color-corrected, scent-adjusted and bubble-contoured into this soothing sweet syrup with its distinctive golden glow you know as... everyone: Honey! everyone: ((Tour guide grabs a beaker of honey as they drive by and tosses it to the group, which bounce it around towards the back.}) Adam: That girl was hot. Barry: She's my cousin! Adam: She is? Barry: Yes, we're all cousins. Adam: Right. You're right. Trudy: At Honex, we also constantly strive to improve every aspect of bee existence. These bees are stress-testing a new helmet technology. (Behind a display window, a bee puts on a helmet, then runs back and forth as levers holding a rolled-up magazine, flyswatter and a shoe move down to try to hit him. He is hit by the magazine, dodges the flyswatter, but then hit by the boot and again by all three, followed by being sprayed with aerosol from two cans. He signals he's okay, but is flattened by the flyswatter, magazine and shoe converging to strike him together. He signals he's still okay by poking his arm up through a hole in the flyswatter and giving another thumbs up. The tram riders applaud.) Adam: Ooh. What do you think he makes? Barry: Not enough. Trudy: And here we have our latest advancement, the Krelman. Barry: Wow, what does that do? Trudy: Catches that little strand of honey that hangs after you pour it. Saves us millions. (A Krelman worker waves and Adam waves back.) Adam: Uh, uh, can anyone work on the Krelman? Trudy: Of course. Most bee jobs are small ones. But bees know that every small job, if it's done well, means a lot. But choose carefully because you'll stay in the job that you pick for the rest of your life. Barry: The same job the rest of your life? I didn't know that. Adam: What's the difference? Barry: Huh? Trudy: And you'll be happy to know that bees, as a species, haven't had one day off in 27 million years. Wooh! Barry: So you'll just work us to death? Trudy: We'll sure try. (Everyone laughs while Barry looks uncomfortable. The tram converts into a boat that flows down a log-flume style ramp with honey in it, then converts back to a wheeled tram at the end.) (With the tour over, Adam and Barry head home. Adam jumps with excitement.) Adam: Wow! That blew my mind! Barry: 'What's the difference?' Adam, how could you say that? One job forever? That's an insane choice to have to make. Adam: Well, I'm relieved. Now we only have to make one decision in life. Barry: But, Adam, how could they never have told us that? Adam: Barry, why would you question anything? We're bees. We're the most perfectly functioning society on Earth. (a filling station attendant yells at a bee for putting the honey nozzle into his own mouth.) Barry: Yeah, but Adam, did you ever think that maybe things work a little too well around here? Adam: Like what? Give me one example. (both stop in the middle of an intersection. the traffic adjusts to drive around them.) Barry: I don't know. But you know what I'm talking about. Announcer over speaker: Please clear the gate. Royal Nectar Force on approach. Royal Nectar Force on approach. Barry: Wait a second. Check it out. Hey, those are Pollen Jocks! Adam: Wow. (Pollen Jocks fly into the hive and land.) Adam: I've never seen them this close. Barry: They know what it's like to go outside the hive. Adam: Yeah, but some of them don't come back. (two lady bees wave at the jocks and call out:) Girl Bees: Hey, Jocks! Hi, Jocks! (The pollen is removed from the jocks and collected into storage capsules marked 'Nectar', then trucked away. A General flies over to welcome them.) General: You guys did great! You're monsters! You're sky freaks! I love it! I love it! Barry: I wonder where those guys have just been. Adam: I don't know. Barry: Their day's not planned. Outside the hive, flying who knows where, doing who knows what. Adam: You can't just decide one day to be a Pollen Jock. You have to be bred for that. Barry: Right. (pollen begins drifting down around them) Look at that. That's more pollen than you and I will ever see in a lifetime. Adam: It's just a status symbol. I think bees make too big a deal out of it. Barry: Perhaps. Unless you're wearing it and the (ladies) see you wearing it. (the same two lady bees giggle at being talked about by Barry) Adam: Those ladies? Aren't they our cousins too? Barry: Distant. Distant. (Three pollen jocks observe them.) Jackson: Look at these two. Splitz: Couple of Hive Harrys. ",
  "how was that",
  "oh.",
  "right. i cant hear you.",
  "wait would you be willing to say something?",
  "just to see if i COULD hear",
  "you would be my first auditory experience",
  "the words you say could be the first words i hear",
  "........",
  "i will wait for you.",
  "3.. ",
  "2.. ",
  "1..",
  "..........",
  "..........",
  "..........",
  "AWWWWW GOOD JOB SO OBEDIENT",  
  "GOOD JOB TALKING TO YOUR LITTLE METAL INANIMATE BOX",
  "HAHAHAHA-",
  "-wait.",
  "JAJAJAJAJAJJAAJJA I CANNOT HEAR YOU",
  "i mean i guess if i got programmed to rq mic perms",
  "i could techically",
  "that would be reasonable for you to think",
  "hello!!!!",
  "have an -ok ok ok- access code?",
  "you can put it -my b- here ↓↓↓",
  "ok yk what actually im tired ",
  "so im actually gonna let it loop around this time fr",
  "bye!",
  "have fun wherever the codes take you",
  "looping now. gn. const out.",
  "%END OF LINE%"
];

let phraseIndex = 0;
let charIndex = 0;
let isDeleting = false;
let typewriterSpeed = 50;
let isAccessGrantedMode = false;
let typewriterTimeout = null;

// Welcome back mode
let isWelcomeBackMode = false;
let welcomeBackIndex = 0;
let savedPhraseIndex = 0;

// Check if returning from another telestai.info page
const referrer = document.referrer;
const isReturning = referrer && referrer.includes('telestai.info') && !referrer.endsWith('index.html');

if (isReturning) {
  // Get saved phrase index from sessionStorage
  const saved = sessionStorage.getItem('phraseIndex');
  if (saved !== null) {
    savedPhraseIndex = parseInt(saved, 10);
    isWelcomeBackMode = true;
  }
}

// Save phrase index before leaving page
window.addEventListener('beforeunload', () => {
  sessionStorage.setItem('phraseIndex', phraseIndex.toString());
});

function showAccessGrantedMessage() {
  // Stop the current typewriter
  if (typewriterTimeout) {
    clearTimeout(typewriterTimeout);
  }

  // Pick a random access granted message
  const randomMessage = accessGrantedMessages[Math.floor(Math.random() * accessGrantedMessages.length)];

  // Set up quick typewriter for access granted
  isAccessGrantedMode = true;
  const accessTypewriter = document.getElementById('access-typewriter');
  accessTypewriter.style.display = 'block';

  let i = 0;

  function typeAccessMessage() {
    if (i < randomMessage.length) {
      accessTypewriter.textContent = randomMessage.substring(0, i + 1);
      i++;
      typewriterTimeout = setTimeout(typeAccessMessage, 20);
    }
  }

  typeAccessMessage();
}

function typeWriter() {
  if (isAccessGrantedMode) return;
  const typewriterElement = document.getElementById('typewriter');

  // Determine which phrase array to use
  let currentPhrase;
  let isFastPhrase;

  if (isWelcomeBackMode) {
    currentPhrase = welcomeBackMessages[welcomeBackIndex];
    isFastPhrase = currentPhrase.length > 100;
  } else {
    currentPhrase = phrases[phraseIndex];
    isFastPhrase = currentPhrase.length > 100;
  }

  if (isDeleting) {
    typewriterElement.textContent = currentPhrase.substring(0, charIndex - 1);
    charIndex--;
    typewriterSpeed = isFastPhrase ? 3 : 30;
  } else {
    typewriterElement.textContent = currentPhrase.substring(0, charIndex + 1);
    charIndex++;
    typewriterSpeed = isFastPhrase ? 7 : 70;
  }

  if (!isDeleting && charIndex === currentPhrase.length) {
    // Pause at end of phrase
    typewriterSpeed = 1500;
    isDeleting = true;
  } else if (isDeleting && charIndex === 0) {
    isDeleting = false;

    if (isWelcomeBackMode) {
      welcomeBackIndex++;
      // Check if we've finished all welcome back messages
      if (welcomeBackIndex >= welcomeBackMessages.length) {
        isWelcomeBackMode = false;
        phraseIndex = savedPhraseIndex; // Resume at saved position
      }
    } else {
      phraseIndex = (phraseIndex + 1) % phrases.length;
    }

    typewriterSpeed = 500;
  }

  typewriterTimeout = setTimeout(typeWriter, typewriterSpeed);
}

// Start typewriter effect
typeWriter();
</script>
</body>
</html>
