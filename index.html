<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>access terminal</title>
<style>
  body {
    margin: 0;
    height: 100vh;
    background: #0055aa;
    color: #aaddff;
    font-family: 'Courier New', Courier, monospace;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    letter-spacing: 1px;
  }
  .box {
    background: #000033;
    padding: 40px;
    border: 2px solid #00aaff;
    box-shadow: 0 0 20px #00aaff;
  }
  input, button {
    font-family: 'Courier New', Courier, monospace;
    font-size: 1.2rem;
    padding: 8px;
    margin: 10px 0;
    background: #001122;
    color: #aaddff;
    border: 1px solid #00aaff;
  }
  button {
    cursor: pointer;
  }
  button:hover { background: #003366; }
  pre { margin-top: 20px; color: #88ccff; }
</style>
</head>
<body>

<div class="box">
<pre>
  ██████╗  █████╗ ███████╗███████╗██╗    ██╗ ██████╗ ██████╗ ██████╗ 
  ██╔══██╗██╔══██╗██╔════╝██╔════╝██║    ██║██╔═══██╗██╔══██╗██╔══██╗
  ██████╔╝███████║███████╗███████╗██║ █╗ ██║██║   ██║██████╔╝██║  ██║
  ██╔═══╝ ██╔══██║╚════██║╚════██║██║███╗██║██║   ██║██╔══██╗██║  ██║
  ██║     ██║  ██║███████║███████║╚███╔███╔╝╚██████╔╝██║  ██║██████╔╝
  ╚═╝     ╚═╝  ╚═╝╚══════╝╚══════╝ ╚══╝╚══╝  ╚═════╝ ╚═╝  ╚═╝╚═════╝ 
</pre>

<h2>enter password:</h2>
<input type="password" id="pass" autofocus>
<button onclick="check()">submit</button>

<div id="msg"></div>
<div id="history"></div>
</div>

<script>
const CORRECT = "ab-1234";

function getCookie(name) {
  const match = document.cookie.match(new RegExp('(^| )' + name + '=([^;]+)'));
  return match ? JSON.parse(decodeURIComponent(match[2])) : [];
}

function setCookie(name, value, days = 365) {
  const d = new Date();
  d.setTime(d.getTime() + (days*24*60*60*1000));
  document.cookie = name + "=" + encodeURIComponent(JSON.stringify(value)) + ";expires=" + d.toUTCString() + ";path=/";
}

let failed = getCookie("failed") || [];
let correctHistory = getCookie("correctHistory") || [];

if (correctHistory.length) {
  document.getElementById("history").innerHTML = "<pre>previously accepted:\n" + correctHistory.join("\n") + "</pre>";
}

function check() {
  const input = document.getElementById("pass").value.trim();
  const msg = document.getElementById("msg");

  if (input === CORRECT) {
    if (!correctHistory.includes(input)) {
      correctHistory.push(input);
      setCookie("correctHistory", correctHistory);
    }
    location.href = "ab-1234.html";
  } else {
    failed.push(input + " @ " + new Date().toISOString().slice(0,19).replace("T"," "));
    setCookie("failed", failed);
    msg.innerHTML = "<pre style='color:#ff5555'>PASSWORD DENIED</pre>";
    msg.innerHTML += "<pre>failed attempts:\n" + failed.join("\n") + "</pre>";
  }
}
</script>
</body>
</html>
