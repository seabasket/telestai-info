<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>telestai.info</title>
<style>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  html {
    height: 100%;
    overflow: hidden;
  }

  body {
    margin: 0;
    height: 100vh;
    font-family: 'Lucida Console', monospace;
    color: #ffffff;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    touch-action: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    background-color: rgb(8, 5, 25);
    transition: background 0.1s ease-out;
  }

  .text-container {
  position: fixed;
  top: 10px;
  left: 10px;
  right: 10px;
  bottom: 15%;
  display: grid;
  grid-template-columns: 1fr 0.3fr 1fr;
  grid-template-rows: auto auto auto auto auto auto auto;
  grid-template-areas:
    "header header header"
    "d  . ."
    "t . l"
    "i . ."
    "music and picnic"
    "md img pd"
    "rules rules rules"
    ". signoff signoff";
  gap: clamp(3px, 0.8vh, 10px);
  align-items: start;
  text-align: center;
  font-size: clamp(0.4rem, 0.85vh, 0.75rem);
  letter-spacing: 0.3px;
  padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
  opacity: 1;
  overflow: hidden;
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
}

.text-container .typewriter {
  opacity: 0;
  overflow-wrap: break-word;
  word-break: break-word;
  max-width: 100%;
}

  .audio-player {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 100;
    transition: all 0.8s cubic-bezier(0.4, 0.0, 0.2, 1);
    opacity: 1;
    padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
  }

  .audio-player.playing {
    top: 95%;
    transform: translate(-50%, -50%);
  }

  audio {
    outline: none;
    border-radius: 50px;
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    padding: 10px 20px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
  }

  audio::-webkit-media-controls-panel {
    background: rgba(255, 255, 255, 0.2);
  }

  pre {
    margin: 0;
    padding: 0;
    white-space: pre-wrap;
    word-wrap: break-word;
    overflow-wrap: break-word;
  }

  #stars {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    opacity: 1;
    transition: opacity 2s ease-out;
  }

  .star {
    position: absolute;
    width: 2px;
    height: 2px;
    background: white;
    border-radius: 50%;
    animation: twinkle 3s ease-in-out infinite;
  }

  @keyframes twinkle {
    0%, 100% { opacity: 0.3; }
    50% { opacity: 1; }
  }

  .home-button {
    position: fixed;
    top: 20px;
    left: 20px;
    padding: 5px 10px;
    background: rgba(0, 0, 0, 0.3);
    color: #ffffff;
    text-decoration: none;
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-radius: 8px;
    font-family: 'Lucida Console', monospace;
    font-size: clamp(0.45rem, 1vh, 0.85rem);
    letter-spacing: 0.3px;
    z-index: 1000;
    backdrop-filter: blur(10px);
    transition: all 0.3s ease;
  }

  .home-button:hover {
    background: rgba(0, 0, 0, 0.5);
    border-color: rgba(255, 255, 255, 0.5);
  }

  .set-recording-button {
    position: fixed;
    top: calc(50% - 120px);
    left: 50%;
    transform: translateX(-50%);
    padding: 10px 20px;
    background: rgba(0, 0, 0, 0.3);
    color: #ffffff;
    text-decoration: none;
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-radius: 8px;
    font-family: 'Lucida Console', monospace;
    font-size: clamp(0.45rem, 1vh, 0.85rem);
    letter-spacing: 0.3px;
    z-index: 1000;
    backdrop-filter: blur(10px);
    transition: all 0.3s ease;
    cursor: pointer;
  }

  .set-recording-button:hover {
    background: rgba(0, 0, 0, 0.5);
    border-color: rgba(255, 255, 255, 0.5);
  }

  .set-recording-button.moved {
    top: auto;
    bottom: 20px;
    left: auto;
    right: 20px;
    transform: none;
  }

  #water {
    position: fixed;
    bottom: 15vh;
    left: 0;
    width: 100%;
    height: 10vh;
    z-index: 1;
    pointer-events: none;
  }

  #sand {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 15vh;
    z-index: 2;
    pointer-events: none;
  }

  .text-container {
    z-index: 3;
  }
</style>
</head>
<body>

<div id="page-overlay" style="position:fixed;top:0;left:0;width:100vw;height:100vh;background:#000000;z-index:9999;pointer-events:none;opacity:1;transition:opacity 0.5s ease-out;"></div>

<div id="stars"></div>

<canvas id="water"></canvas>
<canvas id="sand"></canvas>

<div class="text-container">
  <div class="typewriter" style="grid-area: header; justify-self: center; text-align: center;"><pre style="text-align: center;">
|- - - - - TS-SNRI314 - - - - -|

--OPEN-INVITE!--</pre></div>

  <div class="typewriter" style="grid-area: d; text-align: left;"><pre>
ON
SATURDAY
MARCH FOURTEENTH 
    TWENTY TWENTY-SIX
  </pre></div>

  <div class="typewriter" style="grid-area: t; text-align: left;"><pre>
@
5:30 AM! (YES IN THE MORNING!!)
UNTIL
9:00 AM-ISH (ON BEACH TIIIME ;)
  </pre></div>

  <div class="typewriter" style="grid-area: l; text-align: right;"><pre>
@
HIGHTOWER BEACH
28°11'31.0"N 80°35'36.2"W
[DAY OF/DAY BEFORE UPDATES:
here and @telestai.info on IG]
  </pre></div>

  <div class="typewriter" style="grid-area: i; text-align: left;"><pre>
YOU ARE INVITED TO CELEBRATE
    FOR NO PARTICULAR REASON
      JUST BECAUSE WE CAN

WITH
  </pre></div>

  <div class="typewriter" style="grid-area: music; text-align: center;">MUSIC (PROVIDED)</div>

  <div class="typewriter" style="grid-area: and; text-align: center;">&</div>

  <div class="typewriter" style="grid-area: picnic; text-align: center;">A PICNIC (PROVIDED BY YOU)</div>

  <div style="grid-area: img; display: flex; align-items: center; justify-content: center;">
    <img id="circleImage" src="" alt="" style="width: clamp(60px, 12vw, 120px); height: clamp(60px, 12vw, 120px); border-radius: 50%; object-fit: cover; opacity: 0; transition: opacity 0.5s ease-in;">
  </div>

  <div class="typewriter" style="grid-area: md; text-align: left;"><pre>
THE MUSIC (WILL FOLLOW THE LIGHT)
think.....

- dark 5AM wubs/grooves
- dreamy, new trancy prog. house
- "2013 on the bus headphones in edm nostalgia" core
- jazzy stuff? reggae? we will seeeee
- "Drinking orange juice in the sand at 7:30AM with some new friends" core
- whatever else i feel like :)))

plus a @dj_rude_boy daytime set whatttt
</pre></div>

  <div class="typewriter" style="grid-area: pd; text-align: right;"><pre>
ITS A BEACH PICNIC (SO DO AND BRING PICNIC STUFF)
think.....

journal/art supplies!!!
towel/blanket (beach)
change of swimsuit (beach)
surf/skimboard? (beach 3x)
food/breakfast (yum)
frisbee/ball/flow (yeah)
etc etc etc you get it
</pre></div>

  <div class="typewriter" style="grid-area: rules; text-align: left;"><pre>
PLEASE ABIDE BY THE
RULES:
1. COME FOR THE MUSIC 
    AND BE OPEN TO UNFAMILIAR SOUNDS.
2. FACE ONE ANOTHER, NOT THE DJ.
3. GET TO KNOW SOMEONE YOU DONT YET.
4. BE PRESENT, NOT ONLINE.
5. PRACTICE PLUR. 
  </pre></div>

  <div class="typewriter" style="grid-area: signoff; text-align: left;"><pre>
⠀⠀⠀⠀⠀⠀⠀⠀⣠⣶⣶⣶⣦⠀⠀
⠀⠀⣠⣤⣤⣄⣀⣾⣿⠟⠛⠻⢿⣷⠀
⢰⣿⡿⠛⠙⠻⣿⣿⠁⠀⠀⠀⣶⢿⡇
⢿⣿⣇   ⠈⠏see you soon <3
⠻⣿⣷⣦⣤⣀⠀⠀⠀⠀⣾⡿⠃⠀
⠀⠀⠀⠀⠉⠉⠻⣿⣄⣴⣿⠟⠀⠀⠀    -telestai
⠀⠀⠀⠀⠀⠀⠀⣿⡿⠟⠁⠀⠀⠀⠀
</pre></div>
</div>

<div class="audio-player">
  <audio controls>
    <source src="ts-snri314/ts-snri314.mp3" type="audio/mpeg">
    Your browser does not support the audio element.
  </audio>
</div>

<a href="index.html" class="home-button">HOME</a>

<script>
// Fade in from black
requestAnimationFrame(() => requestAnimationFrame(() => {
  const overlay = document.getElementById('page-overlay');
  overlay.style.opacity = '0';
  setTimeout(() => { overlay.style.display = 'none'; }, 550);
}));

// Sunrise color progression (0-100%)
// Colors ordered from center-bottom outward:
// 0% = center-bottom (horizon glow), 100% = outer edges / top of sky
// At t=100, shift=+55 puts deep orange stop exactly at 100% (top of screen)
const sunsetColors = [
  { percent: 0,   color: [165, 215, 245] },  // clear morning sky (center-bottom)
  { percent: 25,  color: [255, 180, 80] },   // golden horizon
  { percent: 45,  color: [255, 120, 30] },   // deep orange/fiery
  { percent: 62,  color: [200, 100, 140] },  // dawn rose/pink
  { percent: 80,  color: [45, 20, 75] },     // pre-dawn indigo
  { percent: 100, color: [8, 5, 25] }        // deep night (anchor for dark start)
];

// Generate sunrise gradient based on animation progress (0-100)
// Shift range: -100 (all dark) → +55 (deep orange sits at outer rim / top)
function getRadialGradient(progress) {
  const gradientStops = sunsetColors.map((stop) => {
    const color = stop.color;
    const shiftAmount = -100 + (progress / 100) * 155;
    const adjustedPercent = stop.percent + shiftAmount;
    return `rgb(${color[0]}, ${color[1]}, ${color[2]}) ${adjustedPercent}%`;
  });
  return `radial-gradient(ellipse 150% 100% at center bottom, ${gradientStops.join(', ')})`;
}

// Audio player references
const audioPlayer = document.querySelector('.audio-player');
const audioElement = document.querySelector('audio');
const container = document.querySelector('.text-container');
const starsContainer = document.getElementById('stars');
let hasBeenPlayed = false;
let animationFrameId = null;

// Generate twinkling stars
function createStars() {
  const starCount = 50;
  for (let i = 0; i < starCount; i++) {
    const star = document.createElement('div');
    star.className = 'star';
    star.style.left = `${Math.random() * 100}%`;
    star.style.top = `${Math.random() * 100}%`;
    star.style.animationDelay = `${Math.random() * 3}s`;
    starsContainer.appendChild(star);
  }
}

createStars();

// Update gradient and typewriter based on audio progress
function updateGradient() {
  if (audioElement.duration) {
    const progress = (audioElement.currentTime / audioElement.duration) * 100;
    document.body.style.background = getRadialGradient(progress);

    // Stars fade out as sun rises (visible at pre-dawn, gone by midway)
    starsContainer.style.opacity = Math.max(0, 1 - Math.max(0, progress - 30) / 30);

    updateSandBrightness(progress);
    updateWaterBrightness(progress);
    updateTypewriter();
  }

  if (!audioElement.paused) {
    animationFrameId = requestAnimationFrame(updateGradient);
  }
}

// Set initial night sky gradient immediately on page load
document.body.style.background = getRadialGradient(0);
starsContainer.style.opacity = 1;

// Audio player position animation - lock in place after first play
audioElement.addEventListener('play', () => {
  if (!hasBeenPlayed) {
    audioPlayer.classList.add('playing');
    hasBeenPlayed = true;
  }
  if (animationFrameId === null) {
    updateGradient();
  }
});

// Stop animation loop when paused
audioElement.addEventListener('pause', () => {
  if (animationFrameId !== null) {
    cancelAnimationFrame(animationFrameId);
    animationFrameId = null;
  }
});

// Update gradient and typewriter when user seeks
audioElement.addEventListener('seeked', () => {
  updateGradient();
  updateTypewriter();
});

// Typewriter effect synced to audio position
let typewriterPrepared = false;
let typewriterData = [];
let totalChars = 0;
let imageRevealChar = 0;

function prepareTypewriter() {
  if (typewriterPrepared) return;
  typewriterPrepared = true;

  const getElement = (area) => document.querySelector(`[style*="grid-area: ${area}"]`);

  const orderedElements = [
    [getElement('header')],
    [getElement('d')],
    [getElement('t')],
    [getElement('l')],
    [getElement('i')],
    [getElement('music')],
    [getElement('and')],
    [getElement('picnic')],
    [getElement('md'), getElement('pd')],
    [getElement('rules')],
    [getElement('signoff')]
  ];

  orderedElements.forEach((group, groupIndex) => {
    const groupStartChar = totalChars;
    let maxGroupLength = 0;

    if (groupIndex === 8) {
      imageRevealChar = groupStartChar;
    }

    group.forEach(el => {
      if (el) {
        const preTag = el.querySelector('pre');
        const textContainer = preTag || el;
        const text = textContainer.textContent;
        maxGroupLength = Math.max(maxGroupLength, text.length);
      }
    });

    group.forEach(el => {
      if (el) {
        const preTag = el.querySelector('pre');
        const textContainer = preTag || el;
        const text = textContainer.textContent;

        const height = el.offsetHeight;

        typewriterData.push({
          element: el,
          textContainer: textContainer,
          text: text,
          startChar: groupStartChar,
          endChar: groupStartChar + text.length
        });

        if (height > 0) {
          el.style.minHeight = `${height}px`;
        }

        textContainer.textContent = '';
        el.style.opacity = '1';
      }
    });

    totalChars += maxGroupLength;
  });
}

function updateTypewriter() {
  if (!typewriterPrepared || !audioElement.duration) return;

  const progress = audioElement.currentTime / audioElement.duration;
  const targetChars = Math.floor(progress * totalChars);

  typewriterData.forEach(item => {
    if (targetChars >= item.endChar) {
      item.textContainer.textContent = item.text;
    } else if (targetChars > item.startChar) {
      const charsToShow = targetChars - item.startChar;
      item.textContainer.textContent = item.text.substring(0, charsToShow);
    } else {
      item.textContainer.textContent = '';
    }
  });
}

// Prepare typewriter when audio plays
audioElement.addEventListener('play', () => {
  prepareTypewriter();
});

// Sand canvas
const sandCanvas = document.getElementById('sand');
const sandCtx = sandCanvas.getContext('2d');
let sandImageData = null;

function initSand() {
  sandCanvas.width = window.innerWidth;
  sandCanvas.height = Math.round(window.innerHeight * 0.33);

  const w = sandCanvas.width;
  const h = sandCanvas.height;
  const imgData = sandCtx.createImageData(w, h);
  const data = imgData.data;

  // Base daylight sand color
  const baseR = 210, baseG = 175, baseB = 115;
  const variation = 28;

  for (let i = 0; i < w * h; i++) {
    const v = Math.floor((Math.random() * 2 - 1) * variation);
    data[i * 4 + 0] = Math.min(255, Math.max(0, baseR + v));
    data[i * 4 + 1] = Math.min(255, Math.max(0, baseG + v));
    data[i * 4 + 2] = Math.min(255, Math.max(0, baseB + v));
    data[i * 4 + 3] = 255;
  }

  sandImageData = imgData;
  sandCtx.putImageData(imgData, 0, 0);
}

function updateSandBrightness(progress) {
  // 12% brightness at night, 100% at full sunrise
  const brightness = 0.12 + (progress / 100) * 0.88;
  sandCanvas.style.filter = `brightness(${brightness})`;
}

initSand();
updateSandBrightness(0);

// Water canvas
const waterCanvas = document.getElementById('water');
const waterCtx = waterCanvas.getContext('2d');
let waterImageData = null;

function initWater() {
  waterCanvas.width = window.innerWidth;
  waterCanvas.height = Math.round(window.innerHeight * 0.20);

  const w = waterCanvas.width;
  const h = waterCanvas.height;
  const imgData = waterCtx.createImageData(w, h);
  const data = imgData.data;

  // Base water color - turquoise/ocean blue
  const baseR = 65, baseG = 145, baseB = 165;
  const variation = 10;

  // Fill with smooth water color
  for (let i = 0; i < w * h; i++) {
    const v = Math.floor((Math.random() * 2 - 1) * variation);
    data[i * 4 + 0] = Math.min(255, Math.max(0, baseR + v));
    data[i * 4 + 1] = Math.min(255, Math.max(0, baseG + v));
    data[i * 4 + 2] = Math.min(255, Math.max(0, baseB + v));
    data[i * 4 + 3] = 255;
  }

  waterImageData = imgData;
  waterCtx.putImageData(imgData, 0, 0);
}

function updateWaterBrightness(progress) {
  // 8% brightness at night, 100% at full sunrise
  const brightness = 0.08 + (progress / 100) * 0.92;
  waterCanvas.style.filter = `brightness(${brightness})`;
}

initWater();
updateWaterBrightness(0);

window.addEventListener('resize', () => {
  initSand();
  initWater();
  if (audioElement.duration) {
    const progress = (audioElement.currentTime / audioElement.duration) * 100;
    updateSandBrightness(progress);
    updateWaterBrightness(progress);
  }
});
</script>

</body>
</html>
